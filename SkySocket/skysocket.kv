#:kivy 2.2.0
#:set HEIGHT dp(12)
#:set VIDEO_COLOR [1, 0, 0, 1]
#:set TERMINAL_COLOR [0, 0, 1, 1]
#:set GREEN [0, 1, 0.5, 1]
#:set PADDING dp(5)
#:set VIDEO_IP "http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/sl.m3u8"
#:set TAB_BG_COLOR [0.85, 0.85, 0.85, 1]
#:set TAB_CLICK_COLOR [0.74, 0.74, 0.74, 1]
#:set BLACK [0, 0, 0, 1]
#:set WHITE [1, 1, 1, 1]
#:set VIDEO_WIDTH dp(640)
#:set VIDEO_HEIGHT dp(360)

<HeaderLabel@Label>:
    size_hint: None, None
    size: self.texture_size
    color: BLACK

<HeaderLayout@BoxLayout>:
    orientation: 'horizontal'
    size_hint: 1, None
    height: self.minimum_height
    padding: PADDING*2, PADDING
    spacing: PADDING*2
    canvas.before:
        Color:
            rgba: [0, 1, 0, 1]
        Rectangle:
            size: self.size
            pos: self.pos
    HeaderLabel:
        id: drone_label
        text: 'Drone Status:'
    HeaderLabel:
        id: drone_status
        text: 'CONNECTED'
    Label:
        size_hint: None, None
        size: PADDING*2, 0
    HeaderLabel:
        id: battery_label
        text: 'Battery:'
    HeaderLabel:
        id: battery_status
        text: '56%'
    Label:
    HeaderLabel:
        id: car_label
        text: 'Car Status'
    HeaderLabel:
        id: car_status
        text: 'CONNECTING'

<MainWindow>:
    orientation: 'vertical'
    HeaderLayout:
    Label:
        size_hint: 1, None
        height: dp(20)
        canvas.before:
            Color:
                rgba: WHITE
            Rectangle:
                size: self.size
                pos: self.pos
    TabbedPanel:
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        do_default_tab: False
        canvas.before:
            Color:
                rgba: WHITE
            Rectangle:
                size: self.size
                pos: self.pos
        SkyTabbedPannel:
            text: 'Simulation'
            BoxLayout:
                orientation: 'horizontal'
                
                canvas.before:
                    Color:
                        rgba: TAB_BG_COLOR
                    Rectangle:
                        size: self.size
                        pos: self.pos
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_min_x: VIDEO_WIDTH+PADDING*2
                    padding: PADDING, PADDING
                    spacing: PADDING
                    Video:
                        id: video_placeholder
                        source: VIDEO_IP
                        state: 'pause'
                        size_hint: None, 0.8
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        size: VIDEO_WIDTH, VIDEO_HEIGHT
                    Label:
                        id: video_ip
                        color: BLACK
                        size_hint: None, None
                        size: self.texture_size
                        halign: 'left'
                        text: VIDEO_IP
                    Label:
                        id: terminal_placeholder
                        size_hint: 1, 0.2
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        padding: dp(40), dp(40)
                        canvas.before:
                            Color:
                                rgba: TERMINAL_COLOR
                            Rectangle:
                                size: self.size
                                pos: self.pos


                BoxLayout:
                    orientation: 'vertical'
                    padding: PADDING, PADDING
                    spacing: PADDING
                    size_hint_min_x: dp(350)
                    size_hint_max_x: dp(450)
                    
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint: 1, 0.8
                        padding: PADDING, PADDING
                        spacing: PADDING
                        canvas.before:
                            Color:
                                rgba: [0.8 , 0.8, 0.8, 1]
                            Rectangle:
                                size: self.size
                                pos: self.pos
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint: 0.95, 1
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                            canvas.before:
                                Color:
                                    rgba: [0.89, 0.89, 0.89, 1]
                                Rectangle:
                                    size: self.size
                                    pos: self.pos
                            BoxLayout:
                                orientation: 'vertical'
                                size_hint: 0.4, 1
                                padding: dp(0), PADDING*3
                                spacing: PADDING*3
                                Button:
                                    id: car_connect
                                    text: 'Connect'
                                    size_hint: .8, .8
                                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                                Button:
                                    id: car_standby
                                    text: "Standby"
                                    size_hint: .8, .8
                                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                                Button:
                                    id: car_restart
                                    text: "Restart"
                                    size_hint: .8, .8
                                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                            BoxLayout:
                                orientation: 'vertical'
                                size_hint: 0.6, 1
                                Label:
                                    text: 'Connected'
                                    color: BLACK
                                    halign: 'center'
                                    valign: 'bottom'
                                Label:
                                    id: car_connection_status
                                    text: 'TRUE'
                                    color: BLACK
                                    halign: 'center'
                                    valign: 'top'
                                Label:
                                    text: 'Active'
                                    color: BLACK
                                    halign: 'center'
                                    valign: 'bottom'
                                Label:
                                    id: car_active_status
                                    text: 'TRUE'
                                    color: BLACK
                                    halign: 'center'
                                    valign: 'top'

                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint: 0.95, 1
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                            canvas.before:
                                Color:
                                    rgba: [0.89, 0.89, 0.89, 1]
                                Rectangle:
                                    size: self.size
                                    pos: self.pos
                            BoxLayout:
                                orientation: 'vertical'
                                size_hint: 0.4, 1
                                padding: dp(0), PADDING*3
                                spacing: PADDING*3
                                Button:
                                    id: car_connect
                                    text: 'Connect'
                                    size_hint: .8, .8
                                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                                Button:
                                    id: car_standby
                                    text: "Standby"
                                    size_hint: .8, .8
                                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                                Button:
                                    id: car_restart
                                    text: "Restart"
                                    size_hint: .8, .8
                                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                            BoxLayout:
                                orientation: 'vertical'
                                size_hint: 0.6, None
                                height: self.minimum_height
                                Label:
                                    text: 'Connected'
                                    size_hint: 1, None
                                    height: self.texture_size[1]
                                    color: BLACK
                                    halign: 'center'
                                    valign: 'center'
                                Label:
                                    id: car_connection_status
                                    text: 'TRUE'
                                    size_hint: 1, None
                                    height: self.texture_size[1]
                                    color: BLACK
                                    halign: 'center'
                                    valign: 'center'
                                Label:
                                    text: 'Active'
                                    size_hint: 1, None
                                    height: self.texture_size[1]
                                    color: BLACK
                                    halign: 'center'
                                    valign: 'center'
                                Label:
                                    id: car_active_status
                                    text: 'TRUE'
                                    size_hint: 1, None
                                    height: self.texture_size[1]
                                    color: BLACK
                                    halign: 'center'
                                    valign: 'center'
                        
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint: 0.95, None
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5} 
                            height: self.minimum_height
                            Label:
                                text: 'Logging'
                                color: BLACK
                                size_hint: None, None
                                size: self.texture_size
                                halign: 'left'
                            CheckBox:
                                size_hint: None, None
                                size: dp(25), dp(25)
                                pos_hint: {'x': 1, 'center_y': 0.5}
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint: 0.95, None
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5} 
                            height: self.minimum_height
                            Label:
                                text: 'Side Channel'
                                color: BLACK
                                size_hint: None, None
                                size: self.texture_size
                                halign: 'left'
                            CheckBox:
                                size_hint: None, None
                                size: dp(25), dp(25)
                                pos_hint: {'x': 1, 'center_y': 0.5}
                        Label:
                            text: "CV Offloading"
                            color: BLACK
                            size_hint: 1, None
                            size: self.texture_size
                        Slider:
                            size_hint: 0.8, None
                            size: self.cursor_size
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                            min: 0
                            max: 100
                            step: 1
                    Button:
                        text: "START"
                        padding_y: dp(100)
                        size_hint: 0.8, 0.2
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        background_color: GREEN

        SkyTabbedPannel:
            text: 'Testing'
            background_color: TAB_CLICK_COLOR
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: TAB_BG_COLOR
                    Rectangle:
                        size: self.size
                        pos: self.pos
        SkyTabbedPannel:
            text: 'Settings'
            background_color: TAB_CLICK_COLOR
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: TAB_BG_COLOR
                    Rectangle:
                        size: self.size
                        pos: self.pos

